<!DOCTYPE html>
<html lang="en">

<head>
<!-- Bootstrap CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<!-- Bootstrap JS -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>


  <!-- ======================================= -->
  <style>
    @import url("https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap");

    /* @media screen and (min-width:1024px) {
      body {
        display: flex;
      }
    } */

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: "Poppins", sans-serif;
    }

    body {
      background-color: rgb(255, 255, 255);
      flex-basis: calc(100% - 20px);
      max-width: calc(100% - 20px);
    }

    header {
      background-color: #ffffff;
      color: #000000;
      text-align: center;
      padding: 100px 50px 30px;
    }

    span {
      font-size: 20px;
      display: flex;
      justify-content: center;
      padding: 15px 0px 15px;
    }


    .title-container {

      position: relative;
      justify-content: center;

    }

    .title-container img {
      width: 100px;
      height: 100px;

    }

    .title-container h1 {
      font-size: 100px;
      font-weight: 600;
      margin-bottom: 20px;

    }

    .title-container h1,
    .title-container img {
      margin: 0 0px;
      /* 좌우 여백을 10px로 수정 */
      vertical-align: middle;
      display: inline-block;
    }


    .search {
      display: flex;
      justify-content: center;
    }

    .search input {
      padding: 10px;
      background-color: #eaf6ff;
      border: none;
      width: 40%;
      font-size: 15px;
      outline: none;
      border-radius: 10px 0 0 10px;
    }

    .search button {
      padding: 10px 20px;
      background-color: #51c751;
      border: none;
      width: 10%;
      cursor: pointer;
      font-size: 15px;
      color: #fff;
      font-weight: 600;
      border-radius: 0 10px 10px 0;
      transition: all 0.3s ease;
    }

    .search button:hover {
      background-color: #2be09565;
    }

    .meal-item:hover {
      transform: scale(1.05);
    }

    .meal-list {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 50px;
      margin-top: 5%;
      box-sizing: border-box;
      /* 여백 포함한 크기로 설정 */
    }
    
    .meal-item {
      flex-basis: 21%;
      width: 200px;
      height: 400px;
      border-radius: 10px;
      object-fit: cover;
      margin: 10px;
      box-shadow: 10px 16px 24px rgba(149, 157, 165, 0.2);
      cursor: pointer;
      transition: all 0.3s ease;
      background-color: #fcfffc;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: space-between;
      padding: 10px;
    }
    
    .meal-item img {
      width: 100%;
      height: 200px;
      border-radius: 10px;
      object-fit: cover;
    }
    
    .meal-item h3 {
      text-align: center;
      margin: 15px 0;
      font-size: 19px;
      font-weight: 600;
      word-break: keep-all;
    }

    .modal-container-copy {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: #fff;
      padding: 20px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
      z-index: 1000;
      max-width: 40%;
      overflow: auto;
      border-radius: 10px;
    }

    .modal-container-copy .close-button-copy {
      font-size: 42px;
      background: none;
      border: none;
      cursor: pointer;
      color: #333;
      width: 100%;
      text-align: right;
      margin-bottom: 16px;
      transition: all 0.3s ease;
    }

    .modal-container-copy .close-button-copy:hover {
      color: #ff5722;
    }

    .modal-container {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: #fff;
      padding: 20px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
      z-index: 1000;
      max-width: 60%;
      overflow: auto;
      border-radius: 10px;
    }

    .modal-container .close-button {
      font-size: 42px;
      background: none;
      border: none;
      cursor: pointer;
      color: #333;
      width: 100%;
      text-align: right;
      margin-bottom: 16px;
      transition: all 0.3s ease;
    }

    .modal-container .close-button:hover {
      color: #ff5722;
    }

    .meal-details-content {
      overflow-y: auto;
      height: 70vh;
      max-height: 120vh;
    }

    .meal-details-recipe {
      overflow-y: auto;
      height: 80vh;
      max-height: 90vh;
    }

    .recipe-title {
      font-size: 22px;
      font-weight: 600;
      text-align: center;
      margin-bottom: 5px;
    }

    .recipe-category {
      font-size: 18px;
      font-weight: 600;
      text-align: center;
      margin-bottom: 10px;
    }

    .recipe-instruct h3 {
      font-size: 18px;
      font-weight: 600;
      margin-top: 10px;
    }

    .recipe-images {
      padding-top : 10%;
      display: flex;
      width: 80%;
    }

    .recipe-images img{
      max-width: 50%;
      display: block;
      margin: 0 auto 40px;
      border-radius: 10px;
      border: 1px solid #ccc;
      box-shadow: rgba(100, 100, 111, 0.2) 0 7px 29px 0;
    }

    .recipe-instruct p {
      font-size: 16px;
      margin-bottom: 10px;
      text-align: justify;
      padding: 18px;
    }

    .recipe-img img {
      max-width: 50%;
      display: block;
      margin: 0 auto 40px;
      border-radius: 10px;
      border: 1px solid #ccc;
      box-shadow: rgba(100, 100, 111, 0.2) 0 7px 29px 0;
    }

    .recipe-pValue{
      display: block;
      justify-content: center;
      position : fixed;
      /* 원하는 위치로 조정합니다. */
      left: 50%;
      transform: translateX(-50%);
      /* 원하는 너비로 조정합니다. */
      padding-top :40px;
      border-radius: 5px;
      cursor: pointer;
    }

    .recipe-order {
      display: flex;
      justify-content: center;
      position : fixed;
      /* 원하는 위치로 조정합니다. */
      left: 50%;
      transform: translateX(-50%);
      /* 원하는 너비로 조정합니다. */
      padding :10px;
      border-radius: 5px;
      cursor: pointer;
    }

    .recipe-order p {
      padding: 10px 20px;
      background-color: #51c751;
      border: none;
      color: #fff;
      text-decoration: none;
      font-weight: 600;
      font-size: 16px;
      cursor: pointer;
      border-radius: 10px;
      transition: all 0.3s ease;
    }

    .recipe-order p:hover {
      background-color: #2be09565;
    }

    .recipe-title-show {
      display: flex;
      justify-content: center;
      position : fixed;
      font-size: 22px;
      font-weight: 600;
      text-align: center;
      margin-bottom: 5px;
      left: 50%;
      transform: translateX(-50%);
    }
  
    .recipe-order-show {
      display: flex;
      justify-content: center;
      position : fixed;
      /* 원하는 위치로 조정합니다. */
      left: 50%;
      transform: translateX(-50%);
      /* 원하는 너비로 조정합니다. */
      border-radius: 5px;
      cursor: auto;
    }

    .recipe-order-show p {
      padding: 10px 20px;
      border: none;
      border-radius: 10px;
      transition: all 0.3s ease;
    }

    /* 모달 전체에 대한 스타일 */
.modal-content {
  background-color: #fefefe;  /* 배경색 */
  margin: 15% auto;  /* 위아래 15% 마진, 좌우는 자동 */
  padding: 20px;  /* 안쪽 여백 */
  border: 1px solid #888;  /* 테두리 */
  width: 80%;  /* 너비 */
}

/* 모달의 제목 부분 스타일 */
.modal-title {
  color: #5a5a5a;  /* 글자색 */
  font-weight: bold;  /* 글자 굵기 */
  font-size: 20px;  /* 글자 크기 */
  margin-bottom: 15px;  /* 제목 아래의 여백 */
}

/* 모달의 본문 부분 스타일 */
.modal-body {
  font-size: 16px;  /* 글자 크기 */
  color: #333;  /* 글자색 */
  line-height: 1.5;  /* 줄 간격 */
}

/* 모달의 하단 부분 스타일 */
.modal-footer {
  text-align: right;  /* 오른쪽 정렬 */
}

/* 모달 닫기 버튼 스타일 */
.close {
  color: #aaa;  /* 글자색 */
  float: right;  /* 오른쪽 정렬 */
  font-size: 28px;  /* 글자 크기 */
  font-weight: bold;  /* 글자 굵기 */
}


    @media screen and (width < 980px) {

      .search checklist {
        width: 5%;
      }

      .search input {
        width: 75%;
      }

      .search button {
        width: 20%;
      }
    }

    @media screen and (width < 540px) {}
  </style>
</head>

<body>
  <header>
    <div class="title-container">
      <h1 id="titleH1">Dishcovery</h1>
      <img id="titleImg"
        src="https://postfiles.pstatic.net/MjAyMzEwMTlfNzQg/MDAxNjk3NzExNjg0MjE1.WKyWNqlVtfVbmJe2hHUielq8AyVUin__KCUuBiGC7uEg.VYNmaIKJWmcsMHrFoj3giU-pV1nyqZiN1k_myxuVl9og.PNG.jimindk/plate.png?type=w773">
    </div>

    <div class="search">
      <input type="search" name="food_search" id="searchInput" placeholder="Enter an foodName..." />
      <button id="searchButton">검색
      </button>
    </div>

  </header>
  <span>Top searches: chicken, soup, ratatouille, pasta</span> <!-- 임시 -->
  <div id="meal-list" class="meal-list">
    <!-- search하면 api를 받아오는 동시에 받아오는 양껏 데이터 이미지들 리스트에 뿌리기-->

  </div>

  <div class="modal-container">
    <button id="recipeCloseBtn" class="close-button">&times;</button>
    <div class="meal-details-content">
    </div>
    <!-- Content from js will be inserted here -->
    <!-- 모달 -->
<div id="recipeModal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <!-- 모달 내용 -->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Recipe Detail</h4>
      </div>
      <div class="modal-body">
        <p id="modal-content">Some text in the modal.</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

  </div>
  </div>
  <div class="modal-container-copy">
    <button id="recipeCloseBtnCopy" class="close-button-copy">&times;</button>
    <div class="meal-details-recipe">

    </div>
  </div>

</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Dishcovery</title>

<script type="text/javascript">



  const searchInput = document.getElementById('searchInput');
  const searchButton = document.getElementById('searchButton');
  const mealList = document.getElementById('meal-list');
  const modalContainer = document.querySelector('.modal-container');
  const modalContainerCopy = document.querySelector('.modal-container-copy');
  const mealDetailsContent = document.querySelector('.meal-details-content');
  const mealDetailsRecipe = document.querySelector('.meal-details-recipe');
  const recipeCloseBtn = document.getElementById('recipeCloseBtn');
  const recipeCloseBtnCopy = document.getElementById('recipeCloseBtnCopy');
  const apiEndpoint = 'https://openapi.foodsafetykorea.go.kr/api/2a5f16a58a2d4203a558/COOKRCP01/json';
  const resultContainer = document.getElementById('resultContainer');

  $(document).ready(function(){
    $("#searchButton").click(function(){
        var keyword = $("#searchInput").val();
        $.ajax({
            url: '/recipe/',
            type: 'GET',
            data: {
                'keyword': keyword
            },
            success: function(data) {
                console.log(data);
                var recipeList = '';
                for (var i = 0; i < data.row.length; i++) {
                    recipeList += '<li class="recipe-item" data-seq="' + data.row[i].seq + '">';
                    recipeList += '<img src="' + data.row[i].image + '" alt="' + data.row[i].name + '">';
                    recipeList += '<h3>' + data.row[i].name + '</h3></li>';
                }
                $('#meal-list').html(recipeList);
            },
            error: function(request, status, error) {
                console.log('Error fetching data:', error);
            }
        });
    });

    // 클릭 이벤트 추가
    $(document).on('click', '.recipe-item', function() {
      var seq = $(this).data('seq');
      $.ajax({
          url: '/recipe/detail/',
          type: 'GET',
          data: {
              'keyword': $("#searchInput").val(),
              'seq': seq
          },
          success: function(data) {
              // 모달 내용 갱신
              var content = "<h1>" + data.메뉴명 + "</h1>";
              content += "<h2>영양성분</h2>";
              content += JSON.stringify(data.영양성분);
              content += "<h2>레시피</h2>";
              content += JSON.stringify(data.레시피);
              $("#modal-content").html(content);
  
              // 모달 표시
              $("#recipeModal").modal();
          },
          error: function(request, status, error) {
              console.log('Error fetching data:', error);
          }
      });
  });  
});


</script>

</html>